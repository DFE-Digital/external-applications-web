@using DfE.ExternalApplications.Web.Utilities
@using Microsoft.AspNetCore.Html;
@model DfE.ExternalApplications.Web.Services.FieldViewModel
@{
    var isRequired = Model.Field.Required ?? true;
    var validationAttributes = new HtmlString(Model.ValidationAttributes);
    var labelClasses = Model.Field.Label.IsVisible ? "" : "govuk-visually-hidden";
}

<govuk-error-message for="@Model.Id"><span class="govuk-visually-hidden">Error: </span>@Model.ErrorMessage</govuk-error-message>
<govuk-textarea
             id="@Model.Id"
             name="Data[@Model.Field.FieldId]"
             value="@Model.CurrentValue"
             data-field-id="@Model.Field.FieldId">
    <govuk-textarea-label class="@labelClasses">@Model.Field.Label.Value</govuk-textarea-label>
    @{
        var (hintHtml, hintClass) = MarkdownSafe.RenderHintWithClass(Model.Field.Tooltip);
    }
    <govuk-textarea-hint class="@hintClass">
        @Html.Raw(hintHtml)
    </govuk-textarea-hint>

    @if (Model.ErrorMessage != String.Empty)
    {
        <govuk-textarea-error-message>
            <span class="govuk-visually-hidden">Error: </span>@Model.ErrorMessage
        </govuk-textarea-error-message>
    }
    <govuk-textarea-value>@Model.CurrentValue</govuk-textarea-value>
</govuk-textarea>