@page "/Confirmation"
@model DfE.ExternalApplications.Web.Pages.Confirmation.IndexModel
@{
    ViewData["Title"] = Model.DisplayModel.Title;
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        
        <govuk-back-link href="@Model.DisplayModel.ReturnUrl">Back</govuk-back-link>

        <h1 class="govuk-heading-l">@Model.DisplayModel.Title</h1>
        
        <p class="govuk-body">@Model.DisplayModel.Message</p>
        
        @if (Model.DisplayModel.DisplayData.Any())
        {
            <dl class="govuk-summary-list">
                @foreach (var item in Model.DisplayModel.DisplayData)
                {
                    <div class="govuk-summary-list__row">
                        <dt class="govuk-summary-list__key">@item.Key</dt>
                        <dd class="govuk-summary-list__value">@item.Value</dd>
                    </div>
                }
            </dl>
        }
        
        <form method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="ConfirmationToken" />
            @* Repost original form fields when confirming *@
            @foreach (var kvp in Model.DisplayModel.OriginalFormData)
            {
                if (kvp.Value is string)
                {
                    <input type="hidden" name="@kvp.Key" value="@kvp.Value" />
                }
                else if (kvp.Value is string[] arr)
                {
                    foreach (var v in arr)
                    {
                        <input type="hidden" name="@kvp.Key" value="@v" />
                    }
                }
            }
            
            <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                        <h2 class="govuk-fieldset__heading">
                            Do you want to continue?
                        </h2>
                    </legend>
                    
                    <div class="govuk-radios" data-module="govuk-radios">
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="confirmed-yes" name="Confirmed" type="radio" value="true">
                            <label class="govuk-label govuk-radios__label" for="confirmed-yes">
                                Yes, continue
                            </label>
                        </div>
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="confirmed-no" name="Confirmed" type="radio" value="false">
                            <label class="govuk-label govuk-radios__label" for="confirmed-no">
                                No, go back
                            </label>
                        </div>
                    </div>
                </fieldset>
            </div>
            
            <div class="govuk-button-group">
                <button class="govuk-button" type="submit">Continue</button>
            </div>
        </form>
    </div>
</div>
